---
import { Icon } from 'astro-icon/components';
import { useTranslations, getLangFromUrl } from '../i18n/utils';
import { projectsData } from '../i18n/data';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const projects = projectsData[lang];
---

<section id="projects" class="mb-16">
  <h2 class="text-3xl font-bold mb-8 border-b-2 border-cyan-400 pb-2">
    {t('projects.title')}
  </h2>

  <div class="flex flex-col gap-12">
    {projects.map(project => (
      <div class="bg-gray-800 rounded-lg p-6 shadow-lg flex flex-col md:flex-row gap-8 items-center">
        <!-- Contenedor de la Imagen -->
        <div class="md:w-1/3 w-full shrink-0">
          <img
            src={project.image.src}
            alt={project.imageAlt}
            class="rounded-lg w-full h-auto shadow-md"
          />
        </div>
    
        <!-- Contenedor del Texto -->
        <div class="md:w-2/3 w-full">
          <header class="flex justify-between items-start mb-4">
            <h3 class="text-2xl font-bold text-cyan-400">{project.title}</h3>
            <div class="flex items-center gap-4">
              {project.githubUrl && (
                <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-cyan-400 transition-colors" title="Ver repositorio en GitHub"><Icon name="simple-icons:github" class="size-6" /></a>
              )}
              {project.liveUrl && (
                <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-cyan-400 transition-colors" title="Ver sitio en vivo"><Icon name="lucide:external-link" class="size-6" /></a>
              )}
            </div>
          </header>
          <p class="text-sm font-semibold text-gray-400 mb-4">
            {t('projects.role')}: {project.role}
          </p>
    
          <p class="text-gray-300 mb-4">{project.description}</p>
    
          <div class="mb-4">
            <p class="font-semibold text-gray-200">{t('projects.achievements')}:</p>
            <p class="text-gray-300">{project.achievements}</p>
          </div>
    
          <div>
            <p class="font-semibold text-gray-200 mb-2">{t('projects.tech')}:</p>
            <div class="flex flex-wrap gap-2">
              {project.technologies.map((tech) => (
                <span class="bg-cyan-900/50 text-cyan-300 text-xs font-medium px-2.5 py-1 rounded-full">
                  {tech}
                </span>
              ))}
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>
</section>
